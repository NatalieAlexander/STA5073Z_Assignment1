"0",""
"0","###############################Tokenize by sentence#############################"
"0",""
"0","sona_tokenized_by_sentence = unnest_tokens(sona, sentence, speech,"
"0","  token = 'sentences',"
"0","  to_lower = T) %>% #convert text to lowercase"
"0","  select(sentence, everything())"
"0",""
"0","#strip all punctuation from each sentence"
"0","sona_tokenized_by_sentence = sona_tokenized_by_sentence %>%"
"0","  mutate(sentence= str_replace_all(sentence, ""[[:punct:]]"", """"))"
"0",""
"0","#add sentence id column"
"0","sona_tokenized_by_sentence = sona_tokenized_by_sentence %>%"
"0","  mutate(sentence_id = 1:nrow(sona_tokenized_by_sentence))"
"0",""
"0","###############################Tokenize by word#################################"
"0",""
"0","sona_tokenized_by_word = unnest_tokens(sona_tokenized_by_sentence, word, sentence,"
"0","  token = 'words',"
"0","  to_lower = T)%>%  #ensure text is in lowercase"
"0","  select(word, everything())  %>%"
"0","  #remove stop words and empty tokens"
"0","  filter(!word %in% stop_words$word, str_detect(word, '[A-Za-z]'))"
"0",""
"0","#Bar plot of top 20 words for all president_labels for all years"
"0","plot_twenty_words_all_presidents = sona_tokenized_by_word%>%"
"0","  count(word, sort = TRUE) %>%"
"0","  filter(rank(desc(n)) <= 20) %>%"
"0","  ggplot(aes(reorder(word, n), n, fill=word))+"
"0","  geom_col() + coord_flip() + xlab('')+"
"0","  guides(fill= ""none"") + labs(x = ""word"", y = ""Frequency"")+"
"0","  ggtitle(""A. Twenty most frequently used words by all presidents"")"
"0",""
"0","###############################Tokenize by bigram###############################"
"0",""
"0","sona_tokenized_by_bigram = unnest_tokens(sona_tokenized_by_sentence, bigram, sentence,"
"0","  token = 'ngrams', n=2,"
"0","  to_lower = T) %>% #ensure text is in lowercase"
"0","  select(bigram, everything())"
"0",""
"0","#separate the bigrams into words"
"0","bigrams_separated <- sona_tokenized_by_bigram %>%"
"0","  separate(bigram, c('word1', 'word2'), sep = ' ')"
"0",""
"0","#remove stop words"
"0","bigrams_filtered <- bigrams_separated %>%"
"0","  filter(!word1 %in% stop_words$word & !word2 %in% stop_words$word)"
"0",""
"0","#join up the bigrams again"
"0","sona_tokenized_by_bigram <- bigrams_filtered %>%"
"0","  unite(bigram, word1, word2, sep = ' ')"
"0",""
"0","#Bar plot of top 20 most frequently used bigrams for all president_labels over all speeches and years"
"0","plot_twenty_bigrams_all_presidents = sona_tokenized_by_bigram%>%"
"0","  count(bigram, sort = TRUE) %>%"
"0","  filter(rank(desc(n)) <= 20) %>%"
"0","  ggplot(aes(reorder(bigram, n), n, fill=bigram)) +"
"0","  geom_col() + coord_flip() + xlab('')+"
"0","  guides(fill= ""none"")+labs(x = ""bigram"", y = ""Frequency"")+"
"0","  ggtitle(""B. Twenty most frequently used bigrams by all presidents"")"
"0",""
"0","#save image"
"0","grid.arrange(plot_twenty_words_all_presidents, "
"0","             plot_twenty_bigrams_all_presidents, ncol= 2)"
"0",""
